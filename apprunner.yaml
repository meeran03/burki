version: 1.0
runtime: python311
build:
  commands:
    build:
      - pip3 install --upgrade pip
      - pip3 install -r requirements.txt
  env:
    - name: PYTHONUNBUFFERED
      value: "1"
    - name: APP_ENV
      value: "production"
run:
  pre-run: pip3 install --no-cache-dir -r requirements.txt
  runtime-version: "3.11.10"
  command: python3 -m gunicorn app.main:app --host 0.0.0.0 --port 8000 --log-level info
  network:
    port: 8000
  env:
    # Server settings
    - name: PORT
      value: "8000"
    - name: HOST
      value: "0.0.0.0"
    - name: DEBUG
      value: "false"
    - name: SERVER_TYPE
      value: "gunicorn"
    - name: PYTHONPATH
      value: "/app"
    - name: PYTHONUNBUFFERED
      value: "1"
    
    # Database Configuration
    - name: DB_HOST
      value: "buraaqdb.cjgswuawssqe.us-east-2.rds.amazonaws.com"
    - name: DB_PORT
      value: "5432"
    - name: DB_USER
      value: "buraaqadmin"
    - name: DB_PASSWORD
      value: "Diwaar2025"
    - name: DB_NAME
      value: "buraaqdb"
    
    # API Keys
    - name: TWILIO_ACCOUNT_SID
      value: "ACdb78e3b6f06d47ad5179e378638ff080"
    - name: TWILIO_AUTH_TOKEN
      value: "1f7544f6d0348fc82ad302bd7f8bf78a"
    - name: TWILIO_PHONE_NUMBER
      value: "+16826884672"
    - name: DEEPGRAM_API_KEY
      value: "aa09a0719ba4b291d83ef69938bb23e7cd13af1b"
    - name: DEEPGRAM_AUTH_TOKEN
      value: "c840b6cd0ba0ebf2507de3414ffaf68829987a77"
    - name: OPENAI_API_KEY
      value: "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"
    - name: ELEVENLABS_API_KEY
      value: "sk_74a2e5f933d9d4f238c37ac7a56d6c6acb7adb971ae51e80"
    
    # LLM settings
    - name: OPENAI_MODEL
      value: "gpt-4-turbo"
    - name: OPENAI_TEMPERATURE
      value: "0.7"
    - name: OPENAI_MAX_TOKENS
      value: "500"
    
    # TTS settings
    - name: ELEVENLABS_VOICE_ID
      value: "21m00Tcm4TlvDq8ikWAM"
    
    # Security Keys
    - name: SECRET_KEY
      value: "sadlsasdadsadsadsadsadsadasd"
    - name: JWT_SECRET_KEY
      value: "ysadksajdskaldjsakl12321321312"
    
    # Google OAuth Configuration
    - name: GOOGLE_CLIENT_ID
      value: "463735058792-jtgdnjoa38fkpj0iq0fef857j8eikeaa.apps.googleusercontent.com"
    - name: GOOGLE_CLIENT_SECRET
      value: "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"
    - name: GOOGLE_REDIRECT_URI
      value: "http://localhost:8000/auth/google/callback"
    
    # Server Performance Settings
    - name: WORKERS
      value: "2"
    - name: WORKER_CONNECTIONS
      value: "1000"
    - name: TIMEOUT
      value: "300"
    - name: LOG_LEVEL
      value: "info"
    - name: MAX_REQUESTS
      value: "1000"
    - name: MAX_REQUESTS_JITTER
      value: "100"
    - name: KEEP_ALIVE
      value: "2" 